/*
 *  jquery-getit - v1.0.0
 *  Use this plugin to link terms to definitions in the GET-IT Glossary
 *  http://getitglossary.org
 *
 *  Made by Robin Layfield
 *  Under MIT License
 */
!function(a,b,c,d){"use strict";function e(b,c){this.element=b,this.options=a.extend({},g,c),this._defaults=g,this._name=f,this.init()}var f="getit",g={glossary:"getitglossary.org",title:"Click to view the GET-IT Glossary definition of this term",linkTitle:"View full definition at the GET-IT Glossary &rarr;"};a.extend(e.prototype,{init:function(){this.crawl(this.element,this.options)},crawl:function(b,c){a("cite").each(function(b){if(a(this).data("processed"))return!1;var d=a(this).data("term").replace(/\s/g,"+");null!==d&&(a(this).addClass("getit-definition"),a(this).prop("title",c.title),a(this).data("getit-link",'<a href="http://'+c.glossary+"/"+d+'" target="_blank">'+c.linkTitle+"</a>"),a(this).data("tooltip",b),a.ajax({dataType:"json",url:"http://"+c.glossary+"/v1/terms/"+d,context:a(this)}).done(function(c){var d=c[0].definition,e=a('<div class="tooltip" data-tooltip="'+b+'"><h2>'+a(this).data("term")+"</h2><p>"+d+"</p><p>"+a(this).data("getitLink")+'</p><div class="arrow"></div></div>').appendTo("body"),f=a(this).offset();e.css({top:f.top-e.outerHeight()-13,left:f.left-e.width()/2})}),a(this).data("processed",!0),a(this).on("click",function(){var b=a("div[data-tooltip="+a(this).data("tooltip")+"]"),c=a(this).offset();c.left-b.width()/2<=0&&(c.left=b.width()/2),b.css({top:c.top-b.outerHeight()-13,left:c.left-b.width()/2}),b.addClass("active")}))})}}),a.fn[f]=function(b){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))})}}(jQuery,window,document),function(a){a(document).ready(function(){a(document).keyup(function(b){27===b.keyCode&&a(".tooltip").each(function(){if(a(this).hasClass("active")){a(this).addClass("out");var b=a(this);setTimeout(function(){b.removeClass("active").removeClass("out")},300)}})}),a(document).click(function(b){"CITE"!==b.target.nodeName&&a(".tooltip").each(function(){if(a(this).hasClass("active")){a(this).addClass("out");var b=a(this);setTimeout(function(){b.removeClass("active").removeClass("out")},300)}})})})}(jQuery);